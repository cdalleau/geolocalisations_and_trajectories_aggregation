"identifier","date","keywords","title","summary","supplemental_information","input_data_source","creator_name","creator_email","contact","project","acknowledgement","publisher_name","publisher_url","publisher_email","spatial_resolution","spatial_resolution_unit","crs","lineage","variable","longname","table_sql_query"
"indian_atlantic_oceans_catch_5deg_1month_1991_01_01_2008_06_30_random_balbaya"," 2018-02-22 17:54:11","geolocalisation aggregation space time catch ","Catch of tuna and tuna-like species in the Atlantic and Indian oceans (1991-2008) for french surface fisheries by 5Â° square / 1month (logbooks)","This dataset lists catch of tuna and tuna-like species in the Atlantic and Indian oceans for french surface fisheries from 1991 to 2008 aggregated on a 5 degrees and 1 month grid resolution (logbooks). These data come from Balbaya database and are collected by French National Research Institute for Sustainable Development (IRD).  Balbaya database gathers the fine data for seine and pole-and-line vessel from french surface tuna fisheries and partners. This database contains data about landing, individual sample and correct catches and fishery efforts by set. The processing uses only fishing activities.  The processing attributes each geolocation to an unique polygon. If the location is between several polygons then the polygon is choice randomly.Concerning calendar, time_start and time_end are inclusive. If there are no set in a polygon for a period, this level are not in this dataset.",NA,NA,"DALLEAU.C TACONET.P BARDE.J ","chloe.dalleau@ird.fr julien.barde@ird.fr taha.imzilen@ird.fr paul.taconet@ird.fr","owner=ird@ird.fr processor=chloe.dalleau@ird.fr metadata=chloe.dalleau@ird.fr metadata=julien.barde@ird.fr metadata=paul.taconet@ird.fr metadata=taha.imzilen@ird.fr principalInvestigator=julien.barde@ird.fr publisher=ird@ird.fr","BlueBridge H2020 project",NA,"ird@ird.fr","http://www.ird.fr","ird@ird.fr"," 5","degree","+init=epsg:4326 +proj=longlat +datum=WGS85"," step1: catch data from Ob7 database were collated and harmonized.
                    step2: Only data included in lon: -30 5  lat: -10 25 from 1991-01-01 to 2008-06-30 are used. 
                    step3: A regular grid composed of square polygons was created. The spatial extent is lon: -30 5  lat: -10 25 with a resolution of 5 decimal degrees.
                    step4: A continius calendar was created from 1991-01-01 to 2008-06-30 with a period of 1 month(s) . The time start and time end are inclusive.
                    step5: Each fishing data was associated to one polygon using the data geolocalisation.
                    step6:The processing attributes each geolocation to an unique polygon. If the location is between several polygons then the polygon is choice randomly.
                    step7: Data were aggregated according to :geom_wkt, time_start, time_end, ocean, flag, gear, species, schooltype, catchtype, catchunit.
                    step8: Metadata were created according to the input data and the source database.","catch","catch value","      SELECT  
                  CASE
                  WHEN activite.c_ocea=1 THEN 'ATL'::text -- ocean atlantique
                  WHEN activite.c_ocea=2 THEN 'IND'::text -- ocean indien
                  WHEN activite.c_ocea=3 THEN 'PAC'::text -- ocean pacifique
                  ELSE 'UNK'::text
                  END AS ocean,
                  pavillon.c_pays_fao AS flag,  
                  engin.c_engin_4l AS gear, 
                  activite.c_bat,
                  activite.d_act, 
                  activite.n_act, 
                  espece.c_esp_3l AS species,
                  CASE
                  WHEN type_banc.l4c_tban = 'BL' THEN 'FS'::text -- banc libre, free school
                  WHEN type_banc.l4c_tban = 'BO' THEN 'LS'::text -- banc sous object
                  WHEN type_banc.l4c_tban = 'IND' THEN 'UNK'::text -- indetermine, unknown
                  END AS schooltype, 
                  capture.c_cat_p, -- categorie de poids
                  CASE
                  -- ATTENTION les especes considerees en tant que rejet on un code espece compris dans l'interval [8, 800:899]
              WHEN espece.c_esp = 8::numeric THEN 'D'::text --Discard, rejete
              WHEN (espece.c_esp >= 800 AND espece.c_esp <= 899) THEN 'D'::text --Discard, rejete
              ELSE 'L'::text -- Landing
              END AS catchtype, 
              'MT'::text AS catchunit, -- unite de capture fixe :tonne
              ROUND(capture.v_poids_capt * activite.rf3,3) AS catch,-- rf3 : ratio de capture
              activite.v_la_act, 
              activite.v_lo_act

              FROM 
              public.activite
              INNER JOIN public.capture ON (activite.c_bat = capture.c_bat AND
              activite.d_act = capture.d_act AND
              activite.n_act = capture.n_act)
              LEFT JOIN public.bateau ON activite.c_bat = bateau.c_bat
              LEFT JOIN public.pavillon ON bateau.c_pav_b = pavillon.c_pav_b 
              LEFT JOIN public.type_bateau ON bateau.c_typ_b = type_bateau.c_typ_b 
              LEFT JOIN public.engin ON type_bateau.c_engin = engin.c_engin 
              INNER JOIN public.espece ON capture.c_esp = espece.c_esp
              LEFT JOIN public.type_banc ON activite.c_tban = type_banc.c_tban
              
              WHERE
              -- filtrage sur les activite de peche
              -- les types d'operation NULL sont comptabilise car elles n'etaient pas renseigne a une epoque
              (public.activite.c_opera IS NULL OR public.activite.c_opera IN (0,1,2,14) ) AND 
              (public.activite.d_act BETWEEN '1800-01-01' AND '2017-12-31')
              
              ORDER BY 
              ocean, flag, gear, c_bat, d_act, n_act, 
              species, schooltype, v_la_act, v_lo_act, the_geom 
              limit 7000"
